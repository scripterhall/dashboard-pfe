{"ast":null,"code":"import { HistoireTicketService } from \"src/app/service/histoire-ticket.service\";\nimport { MembreService } from \"src/app/service/membre.service\";\nimport { SprintBacklogService } from \"src/app/service/sprint-backlog.service\";\nimport { SprintService } from \"src/app/service/sprint.service\";\nimport { TicketTacheService } from \"src/app/service/ticket-tache.service\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/sprint.service\";\nimport * as i2 from \"src/app/service/histoire-ticket.service\";\nimport * as i3 from \"src/app/service/ticket-tache.service\";\nimport * as i4 from \"src/app/service/sprint-backlog.service\";\nimport * as i5 from \"src/app/service/membre.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/material/menu\";\nimport * as i8 from \"@angular/material/icon\";\nimport * as i9 from \"@angular/material/button\";\nimport * as i10 from \"@angular/material/card\";\nfunction MapComponent_div_1_div_20_div_37_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 34);\n    i0.ɵɵlistener(\"click\", function MapComponent_div_1_div_20_div_37_button_26_Template_button_click_0_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r12);\n      var membre_r10 = restoredCtx.$implicit;\n      var ticketTache_r6 = i0.ɵɵnextContext().$implicit;\n      var ctx_r11 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r11.prendreTicket(membre_r10, ticketTache_r6.id));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"person\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    var membre_r10 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(membre_r10.email);\n  }\n}\nfunction MapComponent_div_1_div_20_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"mat-card\", 26)(2, \"mat-card-header\")(3, \"mat-card-title\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card-subtitle\", 15);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"mat-card-content\");\n    i0.ɵɵelement(8, \"br\")(9, \"br\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"hr\");\n    i0.ɵɵelementStart(11, \"mat-card-footer\")(12, \"div\", 27)(13, \"div\", 28)(14, \"mat-icon\");\n    i0.ɵɵtext(15, \"av_timer\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 28);\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"div\", 29)(20, \"button\", 30)(21, \"mat-icon\");\n    i0.ɵɵtext(22, \"person_add\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"mat-menu\", null, 31)(25, \"div\", 32);\n    i0.ɵɵtemplate(26, MapComponent_div_1_div_20_div_37_button_26_Template, 5, 1, \"button\", 33);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    var ticketTache_r6 = ctx.$implicit;\n    var i_r7 = ctx.index;\n    var _r8 = i0.ɵɵreference(24);\n    var ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", ctx_r5.getBackgroundColor(i_r7));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"#\", ticketTache_r6.id, \"\\u00A0 - \", ticketTache_r6.titre, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticketTache_r6.description);\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 7, ticketTache_r6.dateLancement));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", _r8);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.listMembre);\n  }\n}\nvar _c0 = function (a0, a1, a2) {\n  return {\n    \"bg-success\": a0,\n    \"bg-warning\": a1,\n    \"bg-danger\": a2\n  };\n};\nvar _c1 = function (a0, a1, a2) {\n  return {\n    \"bg-success\": a0,\n    \"bg-warning\": a1,\n    \"bg-primary\": a2\n  };\n};\nfunction MapComponent_div_1_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8)(1, \"div\", 9);\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵelementStart(3, \"mat-card\", 14)(4, \"mat-card-header\")(5, \"mat-card-title\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-card-subtitle\", 15);\n    i0.ɵɵtext(8, \"Priorite \");\n    i0.ɵɵelementStart(9, \"span\", 16);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"mat-card-content\")(12, \"span\", 15);\n    i0.ɵɵtext(13, \"ticket histoire a une velocite de \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\", 17)(15, \"bold\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(17, \"br\");\n    i0.ɵɵelementStart(18, \"span\", 15);\n    i0.ɵɵtext(19, \"ticket\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\u00A0\");\n    i0.ɵɵelementStart(21, \"span\", 16);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 18)(24, \"span\");\n    i0.ɵɵtext(25);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelement(26, \"hr\");\n    i0.ɵɵelementStart(27, \"mat-card-footer\")(28, \"div\", 19)(29, \"div\");\n    i0.ɵɵtext(30, \"date fin sprint :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31);\n    i0.ɵɵpipe(32, \"date\");\n    i0.ɵɵelementStart(33, \"mat-icon\", 20);\n    i0.ɵɵtext(34, \"error\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(35, \"div\", 11)(36, \"div\", 21);\n    i0.ɵɵtemplate(37, MapComponent_div_1_div_20_div_37_Template, 27, 9, \"div\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\", 12);\n    i0.ɵɵelement(39, \"br\");\n    i0.ɵɵelementStart(40, \"div\", 21)(41, \"div\", 8)(42, \"mat-icon\", 23);\n    i0.ɵɵtext(43, \"alarme\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(44, \"div\", 8)(45, \"div\", 24)(46, \"p\", 15);\n    i0.ɵɵtext(47);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    var task_r4 = ctx.$implicit;\n    var ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(task_r4.key.titre);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(12, _c0, task_r4.key.priorite === \"faible\", task_r4.key.priorite === \"Moyenne\", task_r4.key.priorite === \"haute\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(task_r4.key.priorite);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(task_r4.key.effort);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction3(16, _c1, task_r4.key.status === \"TERMINER\", task_r4.key.status === \"EN_ATTENTE\", task_r4.key.status !== \"TERMINER\" && task_r4.key.status !== \"EN_ATTENTE\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(task_r4.key.status);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(task_r4.key.description);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(32, 10, task_r4.key.sprint.dateFin), \" \");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", task_r4.value);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.heurs, \"H\");\n  }\n}\nfunction MapComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"h2\", 4)(3, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function MapComponent_div_1_Template_button_click_3_listener() {\n      var restoredCtx = i0.ɵɵrestoreView(_r15);\n      var sprintBacklog_r1 = restoredCtx.$implicit;\n      var ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.afficherDetailSprintBacklog(sprintBacklog_r1));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\", 6)(6, \"div\", 7)(7, \"div\", 8)(8, \"div\", 9);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"p\", 10);\n    i0.ɵɵtext(11, \"Utilisateur histoire\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 11);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"p\", 10);\n    i0.ɵɵtext(15, \"Liste des t\\u00E2ches\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"div\", 12);\n    i0.ɵɵelement(17, \"br\");\n    i0.ɵɵelementStart(18, \"p\", 10);\n    i0.ɵɵtext(19, \"Horaire\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(20, MapComponent_div_1_div_20_Template, 48, 20, \"div\", 13);\n    i0.ɵɵpipe(21, \"keyvalue\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    var i_r2 = ctx.index;\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" SprintBacklog #\", i_r2 + 1, \" \");\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(21, 2, ctx_r0.taskMap));\n  }\n}\nvar MapComponent = /** @class */function () {\n  function MapComponent(sprintService, ticketHistoireService, ticketTacheService, sprintBacklogService, membreService) {\n    this.sprintService = sprintService;\n    this.ticketHistoireService = ticketHistoireService;\n    this.ticketTacheService = ticketTacheService;\n    this.sprintBacklogService = sprintBacklogService;\n    this.membreService = membreService;\n    this.sprintBacklogs = [];\n    this.ticketsTache = [];\n    this.taskMap = new Map();\n    this.endDate = new Date('2023-03-31T23:59:59');\n  }\n  MapComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.membreService.afficherTousMembres().subscribe(function (data) {\n      _this.listMembre = data;\n    });\n    var productBacklog = JSON.parse(localStorage.getItem('productBacklog'));\n    this.sprintService.getListSprintsByProductBacklog(productBacklog.id).subscribe(function (listSprintData) {\n      console.log(listSprintData);\n      _this.sprintsList = listSprintData;\n      for (var i = 0; i < listSprintData.length; i++) _this.sprintBacklogService.afficherSprintBacklogBySprintId(listSprintData[i].id).subscribe(function (sprintBacklogData) {\n        console.log(sprintBacklogData);\n        _this.sprintBacklogs.push(sprintBacklogData);\n      });\n    });\n  };\n  MapComponent.prototype.afficherDetailSprintBacklog = function (sprintBacklog) {\n    var _this = this;\n    console.log(sprintBacklog.sprint.id);\n    var taskMap = new Map();\n    this.ticketHistoireService.getHistoireTicketBySprintId(sprintBacklog.sprint.id).subscribe(function (data) {\n      _this.ticketsHistoireList = data;\n      var _loop_1 = function (ht) {\n        _this.ticketTacheService.getListTicketTacheParHt(ht.id).subscribe(function (listTacheData) {\n          _this.ticketsTache = listTacheData;\n          taskMap.set(ht, _this.ticketsTache);\n          _this.sommeDesHeurs();\n        });\n      };\n      for (var _i = 0, _a = _this.ticketsHistoireList; _i < _a.length; _i++) {\n        var ht = _a[_i];\n        _loop_1(ht);\n      }\n      _this.taskMap = taskMap;\n    });\n  };\n  //choix couleur tache \n  MapComponent.prototype.getBackgroundColor = function (index) {\n    if (index % 2 === 0) {\n      return {\n        'background-color': '#EEBF32'\n      };\n    } else if (index % 3 === 0 && index % 2 === 0) {\n      return {\n        'background-color': '#B3BD51'\n      };\n    } else if (index % 3 === 0) {\n      return {\n        'background-color': '#D7CD52'\n      };\n    } else if (index % 7 === 0) {\n      return {\n        'background-color': '#DDDAD3'\n      };\n    } else if (index === 1) {\n      return {\n        'background-color': '#DDDAD3'\n      };\n    } else {\n      return {};\n    }\n  };\n  MapComponent.prototype.prendreTicket = function (membre, idTicketTache) {\n    var _this = this;\n    this.ticketTacheService.affecterTicketAMembre(membre, idTicketTache).subscribe(function (dataTicket) {\n      _this.ticketsTache.forEach(function (ticket) {\n        if (ticket.id == idTicketTache) {\n          ticket.dateFin = dataTicket.dateFin;\n          ticket.dateLancement = dataTicket.dateLancement;\n          ticket.membre = dataTicket.membre;\n          ticket.membreId = dataTicket.membreId;\n        }\n      });\n    });\n  };\n  MapComponent.prototype.sommeDesHeurs = function () {\n    var jourDeTravail = 0;\n    for (var _i = 0, _a = this.ticketsTache; _i < _a.length; _i++) {\n      var tt = _a[_i];\n      console.log(tt);\n      if (tt.membreId != null) {\n        jourDeTravail += tt.nbHeurs;\n      }\n    }\n    this.heurs = jourDeTravail;\n  };\n  MapComponent.ɵfac = function MapComponent_Factory(t) {\n    return new (t || MapComponent)(i0.ɵɵdirectiveInject(i1.SprintService), i0.ɵɵdirectiveInject(i2.HistoireTicketService), i0.ɵɵdirectiveInject(i3.TicketTacheService), i0.ɵɵdirectiveInject(i4.SprintBacklogService), i0.ɵɵdirectiveInject(i5.MembreService));\n  };\n  MapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MapComponent,\n    selectors: [[\"app-map\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"content\", 2, \"margin-top\", \"5%\"], [\"class\", \"accordion\", \"id\", \"accordionExample\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"accordionExample\", 1, \"accordion\"], [1, \"accordion-item\"], [\"id\", \"headingOne\", 1, \"accordion-header\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"data-bs-target\", \"#collapse\", \"aria-expanded\", \"true\", \"aria-controls\", \"collapse\", 1, \"accordion-button\", \"bg-danger\", 3, \"click\"], [\"id\", \"collapse\", \"aria-labelledby\", \"headingOne\", \"data-bs-parent\", \"#accordionExample\", 1, \"accordion-collapse\", \"bg-dark\", \"collapse\"], [1, \"accordion-body\", 2, \"margin-top\", \"0px\", \"margin-left\", \"0px\"], [1, \"row\"], [1, \"col-lg-4\", \"col-md-4\", \"col-sm-4\", \"hashed-border\"], [1, \"title\", \"text-light\", \"text-center\"], [1, \"col-lg-6\", \"col-md-6\", \"col-sm-6\", \"hashed-border\"], [1, \"col-lg-2\", \"col-md-2\", \"col-sm-2\", \"hashed-border\"], [\"class\", \"row\", 4, \"ngFor\", \"ngForOf\"], [1, \"example-card\", 2, \"margin-bottom\", \"4%\"], [1, \"title\"], [1, \"badge\", \"rounded-pill\", 3, \"ngClass\"], [1, \"text-warning\"], [2, \"border\", \"2px solid rgba(10,220,15,0.6)\", \"margin-top\", \"2%\", \"padding\", \"5px\"], [1, \"d-flex\", \"justify-content-evenly\"], [1, \"text-danger\", 2, \"margin-bottom\", \"1%\"], [1, \"container\"], [\"class\", \"col-lg-6 col-md-6 col-sm-6\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-12\", \"d-flex\", \"m-4\", \"col-md-8\", \"col-sm-6\", 2, \"font-size\", \"600%\", \"width\", \"auto\", \"height\", \"auto\"], [1, \"badge\", \"w-50\", \"h-75\", \"bg-warning\", \"rounded-circle\", 2, \"margin-left\", \"14%\"], [1, \"col-lg-6\", \"col-md-6\", \"col-sm-6\"], [1, \"example-card\", 2, \"margin-top\", \"6%\", 3, \"ngStyle\"], [1, \"d-flex\", \"bd-highlight\", \"mb-1\"], [1, \"p-2\", \"bd-highlight\"], [1, \"ms-auto\", \"p-2\", \"bd-highlight\"], [\"mat-icon-button\", \"\", \"aria-label\", \"Example icon-button with a menu\", 2, \"margin-top\", \"-27%\", \"border\", \"1px solidblack\", 3, \"matMenuTriggerFor\"], [\"menu\", \"matMenu\"], [2, \"overflow-y\", \"auto\", \"max-height\", \"100px\"], [\"mat-menu-item\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"mat-menu-item\", \"\", 3, \"click\"]],\n    template: function MapComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, MapComponent_div_1_Template, 22, 4, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sprintBacklogs);\n      }\n    },\n    dependencies: [i6.NgClass, i6.NgForOf, i6.NgStyle, i7.MatMenu, i7.MatMenuItem, i7.MatMenuTrigger, i8.MatIcon, i9.MatIconButton, i10.MatCard, i10.MatCardContent, i10.MatCardFooter, i10.MatCardHeader, i10.MatCardSubtitle, i10.MatCardTitle, i6.DatePipe, i6.KeyValuePipe],\n    styles: [\"h2[_ngcontent-%COMP%] {\\n  color: #555;\\n  font-size: 36px;\\n  font-weight: 700;\\n}\\n\\n.hashed-border[_ngcontent-%COMP%] {\\n  border: 1px dotted grey;\\n}\"]\n  });\n  return MapComponent;\n}();\nexport { MapComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}