{"ast":null,"code":"import { HistoireTicketService } from 'src/app/service/histoire-ticket.service';\nimport { ProductBacklogService } from 'src/app/service/product-backlog.service';\nimport { SprintService } from 'src/app/service/sprint.service';\nimport { Chart } from 'chart.js';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/sprint.service\";\nimport * as i2 from \"src/app/service/histoire-ticket.service\";\nimport * as i3 from \"src/app/service/product-backlog.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"@angular/common\";\nfunction CourbesComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"canvas\", 1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    var sprint_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Sprint \", sprint_r1.idSprint, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"sprint-chart-\", sprint_r1.idSprint, \"\");\n  }\n}\nvar url1 = \"http://localhost:9999/gestion-sprints-service/sprints\";\nvar url2 = \"http://localhost:9999/gestion-histoire-ticket/histoireTickets\";\nvar CourbesComponent = /** @class */function () {\n  function CourbesComponent(sprintService, ticketHistoireService, productBacklogService, http) {\n    this.sprintService = sprintService;\n    this.ticketHistoireService = ticketHistoireService;\n    this.productBacklogService = productBacklogService;\n    this.http = http;\n    this.sprints = [];\n    this.ticketHistoires = [];\n  }\n  CourbesComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    var productBacklogId = 1;\n    this.sprintService.getListSprintsByProductBacklog(productBacklogId).subscribe(function (sprints) {\n      _this.sprints = sprints;\n      _this.sprints.forEach(function (sprint) {\n        var startDate = new Date(sprint.dateLancement);\n        var endDate = new Date(sprint.dateFin);\n        var plannedVelocity = sprint.velocite;\n        var days = [];\n        var plannedVelocities = [];\n        var currentDate = startDate;\n        while (currentDate <= endDate) {\n          days.push(_this.formatDate(currentDate));\n          plannedVelocities.push(plannedVelocity);\n          currentDate = _this.addDays(currentDate, 1);\n        }\n        var ctx = document.getElementById(\"sprint-chart-\".concat(sprint.id));\n        var data = {\n          labels: days,\n          datasets: [{\n            label: 'Vélocité planifiée',\n            data: plannedVelocities,\n            backgroundColor: 'rgba(54, 162, 235, 0.5)'\n          }]\n        };\n        var options = {\n          title: {\n            display: true,\n            text: \"Sprint \".concat(sprint.id, \" - Burndown chart\")\n          },\n          scales: {\n            xAxes: [{\n              scaleLabel: {\n                display: true,\n                labelString: 'Jour'\n              }\n            }],\n            yAxes: [{\n              scaleLabel: {\n                display: true,\n                labelString: 'Vélocité'\n              },\n              ticks: {\n                beginAtZero: true,\n                precision: 0\n              }\n            }]\n          }\n        };\n        var chart = new Chart(ctx, {\n          type: 'line',\n          data: data,\n          options: options\n        });\n      });\n    });\n  };\n  CourbesComponent.prototype.formatDate = function (date) {\n    return \"\".concat(date.getDate(), \"/\").concat(date.getMonth() + 1, \"/\").concat(date.getFullYear());\n  };\n  CourbesComponent.prototype.addDays = function (date, days) {\n    var result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n  };\n  CourbesComponent.ɵfac = function CourbesComponent_Factory(t) {\n    return new (t || CourbesComponent)(i0.ɵɵdirectiveInject(i1.SprintService), i0.ɵɵdirectiveInject(i2.HistoireTicketService), i0.ɵɵdirectiveInject(i3.ProductBacklogService), i0.ɵɵdirectiveInject(i4.HttpClient));\n  };\n  CourbesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CourbesComponent,\n    selectors: [[\"app-courbes\"]],\n    decls: 3,\n    vars: 1,\n    consts: [[4, \"ngFor\", \"ngForOf\"], [\"width\", \"800\", \"height\", \"400\", 3, \"id\"]],\n    template: function CourbesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\");\n        i0.ɵɵtext(1, \"Liste des sprints\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, CourbesComponent_div_2_Template, 4, 2, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sprints);\n      }\n    },\n    dependencies: [i5.NgForOf]\n  });\n  return CourbesComponent;\n}();\nexport { CourbesComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}