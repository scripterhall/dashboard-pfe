{"ast":null,"code":"import { __assign, __decorate, __metadata, __param } from \"tslib\";\nimport { HttpClient } from '@angular/common/http';\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { HistoireTicketService } from 'src/app/service/histoire-ticket.service';\nvar ConfirmAddUserStoryDialogueComponent = /** @class */function () {\n  function ConfirmAddUserStoryDialogueComponent(data, http, privateprodutBacklog, histoireTicketService) {\n    this.data = data;\n    this.http = http;\n    this.histoireTicketService = histoireTicketService;\n    this.isFormDisabled = true;\n  }\n  ConfirmAddUserStoryDialogueComponent.prototype.toggleForm = function () {\n    this.isFormDisabled = !this.isFormDisabled;\n    if (!this.isFormDisabled) {\n      this.data.item.productBacklogId = this.getProductBacklogByIdFromLocalStorage();\n      this.data.item = __assign({}, this.data.item);\n    }\n  };\n  ConfirmAddUserStoryDialogueComponent.prototype.addNewUserStory = function () {\n    var newItem = __assign({}, this.data.item);\n    newItem.id = null;\n    newItem.productBacklogId = this.getProductBacklogByIdFromLocalStorage();\n    this.histoireTicketService.addNewUserStory(newItem).subscribe(function (response) {\n      console.log('élément ajouté avec succès');\n    }, function (error) {\n      console.error('erreur lors de l\\'ajout de l\\'élément : ', error);\n    });\n  };\n  ConfirmAddUserStoryDialogueComponent.prototype.assignUserStoryToProductBacklog = function (histoireTicketId, productBacklogId) {\n    var _this = this;\n    this.histoireTicketService.getUserStoryById(histoireTicketId).subscribe(function (histoireTicket) {\n      console.log(\"L'ID de l'histoire ticket est : \".concat(histoireTicket.id));\n      _this.histoireTicketService.assignUserStoryToProductBacklog(histoireTicketId, productBacklogId).subscribe(function (response) {\n        console.log('Histoire ticket affecté au product backlog avec succès', response);\n        _this.elevateProductBacklogVelocity(productBacklogId, histoireTicketId);\n      }, function (error) {\n        return console.log(error);\n      });\n    }, function (error) {\n      return console.log(error);\n    });\n  };\n  ConfirmAddUserStoryDialogueComponent.prototype.elevateProductBacklogVelocity = function (productBacklogId, histoireTicketId) {\n    this.productBacklogService.elevateProductBacklogVelocity(productBacklogId, histoireTicketId).subscribe(function (response) {\n      console.log('La réponse de l\\'API est :', response);\n    }, function (error) {\n      console.error('Une erreur est survenue :', error);\n    });\n  };\n  ConfirmAddUserStoryDialogueComponent.prototype.getProductBacklogByIdFromLocalStorage = function () {\n    var productBacklogCourantStr = localStorage.getItem(\"productBacklogCourant\");\n    var productBacklogCourantObj = JSON.parse(productBacklogCourantStr);\n    var id = productBacklogCourantObj.id;\n    console.log(\"id product backlog courant = \" + id);\n    return id;\n  };\n  ConfirmAddUserStoryDialogueComponent = __decorate([Component({\n    selector: 'app-confirm-add-user-story-dialogue',\n    templateUrl: './confirm-add-user-story-dialogue.component.html',\n    styleUrls: ['./confirm-add-user-story-dialogue.component.scss']\n  }), __param(0, Inject(MAT_DIALOG_DATA)), __metadata(\"design:paramtypes\", [Object, HttpClient, Object, HistoireTicketService])], ConfirmAddUserStoryDialogueComponent);\n  return ConfirmAddUserStoryDialogueComponent;\n}();\nexport { ConfirmAddUserStoryDialogueComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}