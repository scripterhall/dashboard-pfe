{"ast":null,"code":"import { HistoireTicketService } from 'src/app/service/histoire-ticket.service';\nimport { ProductBacklogService } from 'src/app/service/product-backlog.service';\nimport { SprintService } from 'src/app/service/sprint.service';\nimport { Chart } from 'chart.js';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/sprint.service\";\nimport * as i2 from \"src/app/service/histoire-ticket.service\";\nimport * as i3 from \"src/app/service/product-backlog.service\";\nimport * as i4 from \"@angular/common/http\";\nvar CourbesComponent = /** @class */function () {\n  function CourbesComponent(sprintService, ticketHistoireService, productBacklogService, http) {\n    this.sprintService = sprintService;\n    this.ticketHistoireService = ticketHistoireService;\n    this.productBacklogService = productBacklogService;\n    this.http = http;\n    this.sprints = [];\n    this.ticketHistoires = [];\n  }\n  CourbesComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.ticketHistoireService.getHistoireTicketBySprintId(171).subscribe(function (tickets) {\n      var effortEstime = [];\n      var effortReel = [];\n      var dates = [];\n      tickets.forEach(function (ticket) {\n        if (ticket.status === 'EN_COURS' || ticket.status === 'EN_ATTENTE') {\n          effortEstime.push(ticket.effort);\n        } else if (ticket.status === 'TERMINE') {\n          effortReel.push(ticket.effort);\n        }\n      });\n      _this.sprintService.getListSprintsByProductBacklog(1).subscribe(function (sprints) {\n        var sprint = sprints.find(function (s) {\n          return s.id === 171;\n        });\n        var startDate = new Date(sprint.dateLancement);\n        var endDate = new Date(sprint.dateFin);\n        var days = _this.getDaysBetweenDates(startDate, endDate);\n        for (var i = 0; i < days.length; i++) {\n          var day = days[i];\n          dates.push(day.toLocaleDateString());\n        }\n        var chartData = {\n          labels: dates,\n          datasets: [{\n            label: 'Effort estimé',\n            data: effortEstime,\n            borderColor: 'blue',\n            fill: false\n          }, {\n            label: 'Effort réel',\n            data: effortReel,\n            borderColor: 'green',\n            fill: false\n          }]\n        };\n        var ctx = document.getElementById('myChart');\n        var myChart = new Chart(ctx, {\n          type: 'line',\n          data: chartData,\n          options: {\n            responsive: true,\n            plugins: {\n              title: {\n                display: true,\n                text: 'Effort estimé et réel par jour de sprint'\n              }\n            }\n          }\n        });\n      });\n    });\n  };\n  CourbesComponent.prototype.getDaysBetweenDates = function (startDate, endDate) {\n    var days = [];\n    var currentDate = startDate;\n    while (currentDate <= endDate) {\n      days.push(currentDate);\n      currentDate = new Date(currentDate.getTime() + 86400000); // Add one day\n    }\n\n    return days;\n  };\n  CourbesComponent.ɵfac = function CourbesComponent_Factory(t) {\n    return new (t || CourbesComponent)(i0.ɵɵdirectiveInject(i1.SprintService), i0.ɵɵdirectiveInject(i2.HistoireTicketService), i0.ɵɵdirectiveInject(i3.ProductBacklogService), i0.ɵɵdirectiveInject(i4.HttpClient));\n  };\n  CourbesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CourbesComponent,\n    selectors: [[\"app-courbes\"]],\n    decls: 1,\n    vars: 0,\n    consts: [[\"id\", \"myChart\"]],\n    template: function CourbesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"canvas\", 0);\n      }\n    },\n    styles: [\"#myChart[_ngcontent-%COMP%] {\\n  display: block;\\n  margin: 0 auto;\\n}\"]\n  });\n  return CourbesComponent;\n}();\nexport { CourbesComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}