{"ast":null,"code":"import { __decorate, __metadata, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { TicketTacheService } from 'src/app/service/ticket-tache.service';\nimport { Chart } from 'chart.js';\nvar StatCourbComponent = /** @class */function () {\n  function StatCourbComponent(dialogRef, data, ticketTacheService) {\n    this.dialogRef = dialogRef;\n    this.data = data;\n    this.ticketTacheService = ticketTacheService;\n  }\n  StatCourbComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.ticketTacheService.getTicketsTacheByMembreId(this.data.membre.id).subscribe(function (data) {\n      data = data.filter(function (tt) {\n        return tt.ht.id == _this.data.histoire.id;\n      });\n      _this.ticketsTache = data;\n      //tableau des titre\n      var ticketTitres = _this.ticketsTache.map(function (ticket) {\n        return ticket.titre;\n      });\n      //tableau des Heurs\n      var ticketHeurs = _this.ticketsTache.map(function (ticket) {\n        return ticket.nbHeurs;\n      });\n      //couleur pour chaque ticket\n      var barColors = _this.ticketsTache.map(function (ticket) {\n        var r = Math.floor(Math.random() * 255);\n        var g = Math.floor(Math.random() * 255);\n        var b = Math.floor(Math.random() * 255);\n        return \"rgba(\".concat(r, \",\").concat(g, \",\").concat(b, \",0.2)\");\n      });\n      //Configuration de chart bar \n      var barChartConfig = {\n        type: 'bar',\n        data: {\n          labels: ticketTitres,\n          datasets: [{\n            label: 'Nombre d\\'heures',\n            data: ticketHeurs,\n            backgroundColor: barColors\n          }]\n        },\n        options: {\n          scales: {\n            yAxes: [{\n              ticks: {\n                beginAtZero: true,\n                stepSize: 1 // Vous pouvez changer le stepSize selon vos préférences\n              }\n            }]\n          },\n\n          animation: {\n            duration: 1000,\n            easing: 'linear' // Type d'animation\n          },\n\n          events: [],\n          responsiveAnimationDuration: 0 // Désactiver l'animation responsive\n        }\n      };\n      // Création du graphique à barres\n      _this.barChart = new Chart(document.getElementById(\"avencement\"), barChartConfig);\n      _this.initialiserChartZero();\n      _this.ticketsTache.forEach(function (tache, index) {\n        var progressBar = setInterval(function () {\n          if (_this.barChart.data.datasets[0].data[index] >= tache.nbHeurs) {\n            clearInterval(progressBar);\n          } else {\n            //pour incrementer la nombre heurs de 1 data[index]\n            _this.barChart.data.datasets[0].data[index]++;\n            _this.barChart.update();\n          }\n        }, 1000 * 3600 / tache.nbHeurs);\n      });\n    });\n  };\n  StatCourbComponent.prototype.initialiserChartZero = function () {\n    var _this = this;\n    this.barChart.data.datasets.forEach(function (dataset) {\n      dataset.data = _this.ticketsTache.map(function (tache) {\n        return 0;\n      });\n    });\n  };\n  StatCourbComponent = __decorate([Component({\n    selector: 'app-stat-courb',\n    templateUrl: './stat-courb.component.html',\n    styleUrls: ['./stat-courb.component.scss']\n  }), __param(1, Inject(MAT_DIALOG_DATA)), __metadata(\"design:paramtypes\", [MatDialogRef, Object, TicketTacheService])], StatCourbComponent);\n  return StatCourbComponent;\n}();\nexport { StatCourbComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}