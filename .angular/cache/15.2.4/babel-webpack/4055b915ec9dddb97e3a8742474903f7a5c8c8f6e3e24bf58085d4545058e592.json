{"ast":null,"code":"import { __decorate, __metadata } from \"tslib\";\nimport { Component } from \"@angular/core\";\nimport { HistoireTicketService } from \"src/app/service/histoire-ticket.service\";\nimport { MembreService } from \"src/app/service/membre.service\";\nimport { SprintBacklogService } from \"src/app/service/sprint-backlog.service\";\nimport { SprintService } from \"src/app/service/sprint.service\";\nimport { TicketTacheService } from \"src/app/service/ticket-tache.service\";\nvar MapComponent = /** @class */function () {\n  function MapComponent(sprintService, ticketHistoireService, ticketTacheService, sprintBacklogService, membreService) {\n    this.sprintService = sprintService;\n    this.ticketHistoireService = ticketHistoireService;\n    this.ticketTacheService = ticketTacheService;\n    this.sprintBacklogService = sprintBacklogService;\n    this.membreService = membreService;\n    this.sprintBacklogs = [];\n    this.ticketsTache = [];\n    this.taskMap = new Map();\n    this.endDate = new Date('2023-03-31T23:59:59');\n  }\n  MapComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    this.membreService.afficherTousMembres().subscribe(function (data) {\n      _this.listMembre = data;\n    });\n    var productBacklog = JSON.parse(localStorage.getItem('productBacklog'));\n    this.sprintService.getListSprintsByProductBacklog(productBacklog.id).subscribe(function (listSprintData) {\n      console.log(listSprintData);\n      _this.sprintsList = listSprintData;\n      for (var i = 0; i < listSprintData.length; i++) _this.sprintBacklogService.afficherSprintBacklogBySprintId(listSprintData[i].id).subscribe(function (sprintBacklogData) {\n        console.log(sprintBacklogData);\n        _this.sprintBacklogs.push(sprintBacklogData);\n      });\n    });\n  };\n  MapComponent.prototype.afficherDetailSprintBacklog = function (sprintBacklog) {\n    var _this = this;\n    console.log(sprintBacklog.sprint.id);\n    var taskMap = new Map();\n    this.ticketHistoireService.getHistoireTicketBySprintId(sprintBacklog.sprint.id).subscribe(function (data) {\n      _this.ticketsHistoireList = data;\n      var _loop_1 = function (ht) {\n        _this.ticketTacheService.getListTicketTacheParHt(ht.id).subscribe(function (listTacheData) {\n          _this.ticketsTache = listTacheData;\n          taskMap.set(ht, _this.ticketsTache);\n        });\n      };\n      for (var _i = 0, _a = _this.ticketsHistoireList; _i < _a.length; _i++) {\n        var ht = _a[_i];\n        _loop_1(ht);\n      }\n      _this.taskMap = taskMap;\n    });\n  };\n  //choix couleur tache \n  MapComponent.prototype.getBackgroundColor = function (index) {\n    if (index % 2 === 0) {\n      return {\n        'background-color': '#EEBF32'\n      };\n    } else if (index % 3 === 0 && index % 2 === 0) {\n      return {\n        'background-color': '#B3BD51'\n      };\n    } else if (index % 3 === 0) {\n      return {\n        'background-color': '#D7CD52'\n      };\n    } else if (index % 7 === 0) {\n      return {\n        'background-color': '#DDDAD3'\n      };\n    } else if (index === 1) {\n      return {\n        'background-color': '#DDDAD3'\n      };\n    } else {\n      return {};\n    }\n  };\n  MapComponent.prototype.prendreTicket = function (membre, idTicketTache) {\n    var _this = this;\n    this.ticketTacheService.affecterTicketAMembre(membre, idTicketTache).subscribe(function (dataTicket) {\n      _this.ticketsTache.forEach(function (ticket) {\n        if (ticket.id == idTicketTache) {\n          ticket.dateFin = dataTicket.dateFin;\n          ticket.dateLancement = dataTicket.dateLancement;\n          ticket.membre = dataTicket.membre;\n          ticket.membreId = dataTicket.membreId;\n        }\n      });\n    });\n  };\n  MapComponent.prototype.sommeDesHeurs = function (ticketsTache) {\n    var jourDeTravail = 0;\n    for (var _i = 0, ticketsTache_1 = ticketsTache; _i < ticketsTache_1.length; _i++) {\n      var tt = ticketsTache_1[_i];\n      if (tt.membreId != null) {\n        jourDeTravail += tt.nbHeurs;\n      }\n    }\n  };\n  MapComponent = __decorate([Component({\n    selector: \"app-map\",\n    templateUrl: \"map.component.html\",\n    styleUrls: ['./map.component.scss']\n  }), __metadata(\"design:paramtypes\", [SprintService, HistoireTicketService, TicketTacheService, SprintBacklogService, MembreService])], MapComponent);\n  return MapComponent;\n}();\nexport { MapComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}