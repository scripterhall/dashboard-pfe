{"ast":null,"code":"import { Chart } from 'chart.js';\nvar url1 = \"http://localhost:9999/gestion-sprints-service/sprints\";\nvar url2 = \"http://localhost:9999/gestion-histoire-ticket/histoireTickets\";\nvar CourbesComponent = /** @class */function () {\n  function CourbesComponent(sprintService, ticketHistoireService, productBacklogService, http) {\n    this.sprintService = sprintService;\n    this.ticketHistoireService = ticketHistoireService;\n    this.productBacklogService = productBacklogService;\n    this.http = http;\n    this.sprints = [];\n    this.selectedSprint = null;\n    this.ticketHistoires = [];\n    this.chart = null;\n  }\n  CourbesComponent.prototype.ngOnInit = function () {\n    var _this = this;\n    var productBacklogId = 1;\n    this.http.get(\"\".concat(url1, \"/productBacklog/\") + productBacklogId).subscribe(function (sprints) {\n      _this.sprints = sprints;\n      _this.sprints.forEach(function (sprint) {\n        var startDate = new Date(sprint.dateLancement);\n        var endDate = new Date(sprint.dateFin);\n        var plannedVelocity = sprint.velocite;\n        var days = [];\n        var plannedVelocities = [];\n        var currentDate = startDate;\n        while (currentDate <= endDate) {\n          days.push(_this.formatDate(currentDate));\n          plannedVelocities.push(plannedVelocity);\n          currentDate = _this.addDays(currentDate, 1);\n        }\n        var ctx = document.getElementById(\"sprint-chart-\".concat(sprint.id));\n        var data = {\n          labels: days,\n          datasets: [{\n            label: 'Vélocité planifiée',\n            data: plannedVelocities,\n            backgroundColor: 'rgba(54, 162, 235, 0.5)'\n          }]\n        };\n        var options = {\n          title: {\n            display: true,\n            text: \"Sprint \".concat(sprint.id, \" - Burndown chart\")\n          },\n          scales: {\n            xAxes: [{\n              scaleLabel: {\n                display: true,\n                labelString: 'Jour'\n              }\n            }],\n            yAxes: [{\n              scaleLabel: {\n                display: true,\n                labelString: 'Vélocité'\n              },\n              ticks: {\n                beginAtZero: true,\n                precision: 0\n              }\n            }]\n          }\n        };\n        var chart = new Chart(ctx, {\n          type: 'line',\n          data: data,\n          options: options\n        });\n      });\n    });\n  };\n  CourbesComponent.prototype.formatDate = function (date) {\n    return \"\".concat(date.getDate(), \"/\").concat(date.getMonth() + 1, \"/\").concat(date.getFullYear());\n  };\n  CourbesComponent.prototype.addDays = function (date, days) {\n    var result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n  };\n  return CourbesComponent;\n}();\nexport { CourbesComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}